import{D as S,r as u,i as D,z as V,o as d,c as h,b as s,t as r,u as c,g as y,w as x,e as b,a as C,F as T,f as B,h as v}from"./vendor.7128caef.js";import{i as a,_ as M}from"./index.4a2d4ff6.js";const N={style:{display:"flex","flex-grow":"1",overflow:"hidden"}},U={style:{"flex-grow":"1",display:"flex","flex-direction":"column"}},j={class:"headline"},A=v(" ADD | DOC "),L={key:0},$={style:{padding:"6px"}},z={class:"pure-form"},I={for:"show-labels",style:{padding:"6px"}},G=v(" Show labels "),J={for:"show-cluster-shapes",style:{padding:"6px"}},O=v(" Show cluster shapes "),R={for:"show-cluster-labels",style:{padding:"6px"}},q=v(" Show cluster labels "),H={key:0,style:{"background-color":"#000","flex-grow":"1",display:"flex"}},K={class:"documents-panel",style:{width:"600px",display:"flex","flex-direction":"column","align-items":"stretch","justify-content":"center"}},P={style:{"flex-grow":"1","overflow-y":"auto"}},Q={key:0,class:"card",style:{cursor:"default"}},W={class:"card-content",style:{"white-space":"pre-wrap"}},X={class:"pill-box"},Y=["onMouseenter"],te={setup(Z){const g=S(),f=u(!0),w=u(!0),m=u(!0),p=u(!1),o=u({}),_=u([]),n=u((l,e)=>e.split(".").reduce((t,i)=>t==null?void 0:t[i],l)),F=function(l){const e="elastic",t="9pSJ5siACNtVAUwB2mj8";return fetch("http://10.92.0.111:9200/"+l,{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Basic "+V.encode(e+":"+t)}}).then(i=>{if(i.ok)return i.json();console.warn("/!\\ Server returned "+i.status+" : "+i.statusText)})};let k=u(function(l){l&&l._source&&n.value(l._source,a.esEntitiesField)?_.value=n.value(l._source,a.esEntitiesField).map(e=>({label:e,score:1})):_.value=[]}),E=u(function(l){_.value=[{label:l,score:1}]});return D(()=>{let l=g.params.id.replace(/Â·/gi,".");F(a.esIndex+"/_doc/"+l).then(e=>{console.log(e),o.value=e,_.value=n.value(o.value._source,a.esEntitiesField).map(t=>({label:t,score:1})),p.value=!0}).catch(e=>{console.warn(e)})}),(l,e)=>(d(),h("main",N,[s("div",U,[s("div",j,[s("h1",null,[A,p.value?(d(),h("span",L,"| "+r(n.value(o.value._source,c(a).esTitleField)),1)):y("",!0)])]),s("div",$,[s("form",z,[s("fieldset",null,[s("label",I,[x(s("input",{type:"checkbox",id:"show-labels","onUpdate:modelValue":e[0]||(e[0]=t=>f.value=t)},null,512),[[b,f.value]]),G]),s("label",J,[x(s("input",{type:"checkbox",id:"show-cluster-shapes","onUpdate:modelValue":e[1]||(e[1]=t=>w.value=t)},null,512),[[b,w.value]]),O]),s("label",R,[x(s("input",{type:"checkbox",id:"show-cluster-labels","onUpdate:modelValue":e[2]||(e[2]=t=>m.value=t)},null,512),[[b,m.value]]),q])])])]),p.value?(d(),h("div",H,[C(M,{"focused-entities":_.value,"show-labels":f.value,"show-cluster-shapes":w.value,"show-cluster-labels":m.value},null,8,["focused-entities","show-labels","show-cluster-shapes","show-cluster-labels"])])):y("",!0)]),s("div",K,[s("div",P,[p.value?(d(),h("div",Q,[s("h2",null,r(n.value(o.value._source,c(a).esTitleField)),1),s("div",W,r(n.value(o.value._source,c(a).esTextField)),1),s("div",X,[(d(!0),h(T,null,B(n.value(o.value._source,c(a).esEntitiesField),t=>(d(),h("div",{class:"entity-pill",onMouseenter:i=>c(E)(t),onMouseleave:e[3]||(e[3]=i=>c(k)(o.value))},r(t),41,Y))),256))]),s("small",null,[s("em",null,r(n.value(o.value._source,c(a).esSourceField)),1),v(" \xA0\xB7\xA0 "+r(n.value(o.value._source,c(a).esDateField))+" \xA0\xB7\xA0 "+r(o.value._id),1)])])):y("",!0)])])]))}};export{te as default};
